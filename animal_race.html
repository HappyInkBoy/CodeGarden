<!DOCTYPE html>
<html>
   <head>
  </head>
   <body>
<h1>My second adventure game</h1>

<img src="guinea_pig.png" id="guinea_pig" width="250" height="180">
<img src="pug.png" id="pug" width="250" height="180">

<p id = "race">Super Race!</p>
<script>
// file:///Users/alex/Programs/animal_race.html
var x1 = 0;
var x2 = 0;
var v1 = 1;
var v2 = 1;

var elt2 = document.getElementById("guinea_pig");
elt2.style.position = "absolute";
elt2.style.left = x2 + 'px';
elt2.style.top = 300 + 'px';

var elt1 = document.getElementById("pug");
elt1.style.position = "absolute";
elt1.style.left = x1 + 'px';
elt1.style.top = 100 + 'px';

var d = new Date();
var time = d.getTime();

var t1 = Math.random();
var t2 = Math.random();

document.addEventListener('keydown', logKey);

function logKey(e) {
  if (e.key == 's') {
    console.log("pugsy");
    var t = new Date().getMilliseconds();
    if (Math.abs(t-t1) < 1000){
        v1 = v1 * 1.1;
    }
  }
  if (e.key == 'k') {
    console.log("guinea_pig");
    var t = new Date().getMilliseconds();
    if (Math.abs(t-t2) < 1000){
        v2 = v2 * 1.1;
    }
  }
}

var interval = setInterval(function(){
    x1 = x1 + v1;
    elt1.style.left = x1 + 'px';
    x2 = x2 + v2;
    elt2.style.left = x2 + 'px';
    if (x1 >= 1000){
      // Pugsy win!
      clearInterval(interval);
      var raceElt = document.getElementById("race");
      raceElt.innerHTML = "Pugsy Wins!";
    }
    if (x2 >= 1000){
      //Guinea Pig Win!
      clearInterval(interval);
      var raceElt = document.getElementById("race");
      raceElt.innerHTML = "Guinea Pig Wins!";
    }
}, 30);

</script>

</body>
</html>
